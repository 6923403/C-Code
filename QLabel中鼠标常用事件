mylabel.h

//捕获事件

    //鼠标进入

    void enterEvent(QEvent *);

    //鼠标离开

    void leaveEvent(QEvent *);

    //鼠标按下

    void mouseMoveEvent(QMouseEvent * ev);

    //鼠标释放

    void mousePressEvent(QMouseEvent * ev);

    //鼠标移动

    void mouseReleaseEvent(QMouseEvent * ev);
    
    
    ------------------------------------

#include <QMouseEvent>

mylabel::mylabel(QWidget *parent) : QLabel(parent)

{

    //设置鼠标的追踪

    this -> setMouseTracking(true);

}

//鼠标进入

void mylabel::enterEvent(QEvent *)

{

    qDebug() << "选中了";

}

//鼠标离开

void mylabel::leaveEvent(QEvent *)

{

    qDebug() << "离开了";

}

//鼠标按下

void mylabel::mouseMoveEvent(QMouseEvent * ev)

{

  if(ev -> button() == Qt::LeftButton)

  {

  //找到按下的位置

  QString str =  QString("x = %1 y = %2").arg(ev -> x()).arg(ev -> y());

  qDebug() << str;

  //找到位置 当鼠标为左键按下显示位置

    }

      qDebug() << "按下了";

}

//鼠标释放

void mylabel::mousePressEvent(QMouseEvent * ev)

{

  qDebug() << "释放了";

}

//鼠标移动

void mylabel::mouseReleaseEvent(QMouseEvent * ev)

{

    //持续状态 需要用buttons 用与操作符 进行判断

    if(ev -> button() & Qt::LeftButton)

    {

        QString str =  QString("x = %1 y = %2").arg(ev -> x()).arg(ev -> y());

        qDebug() << str;

    }

  qDebug() << "移动了";

}
